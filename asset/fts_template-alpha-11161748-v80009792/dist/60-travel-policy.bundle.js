(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{1718:function(t,e,i){},2318:function(t,e,i){"use strict";i.r(e);var o=i(1),r=i.n(o),c=i(32),n=i.n(c),a=i(9),s=i(0),l=i(3),u=i(8),p=i(10),f=i(20),m=i(632),d=i(2);function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var k={default:0,loading:1,success:2,fail:3},_=new p.a({"in-way":"入","out-way":"出"}),g={name:"TravelPolicy",components:{UiDropdown:m.a},mixins:[s.k,s.m],props:{source:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{PickerStatus:k,WayType:_,transferReportId:"transfer:transfer:".concat(s.g.getRandom())}},computed:{fromPicker:function(){var t=this.source.forms&&this.source.forms.filter((function(t){return"from"===t.id}));return t&&t.length?t[0]:null},toPicker:function(){var t=this.source.forms&&this.source.forms.filter((function(t){return"to"===t.id}));return t&&t.length?t[0]:null}},watch:{item:function(){this.init()}},created:function(){this.weuiPicker=null,u.b.onInputChange(this.hide),u.b.onInputConfirm(this.hide),s.a.$on(l.b.REAL_SWITCH_TAB,this.hide),s.a.$on(l.b.APP_VIEW_CHANGED,this.hide),this.init()},methods:{onTapMenu:function(t,e,i){this.M_serviceSearchGo(t),this.report({clickZone:"".concat(this.M_getClickZonePath(),".list[").concat(e,"].menu[").concat(i,"]"),clickContent:t.title||"",expand:this.M_getJumpSubScene(t)},t)},getRiskTagBgColor:function(t){if(/^<em/.test(t)){var e=(t.match(/class="(.*)"/)||["",""])[1];return e?"var(--TAG-BACKGROUND-".concat({"font-color-BRAND":"GREEN","font-color-ORANGE":"YELLOW","font-color-RED":"RED"}[e],")"):""}return""},onTapRiskLevel:function(t,e){var i=t.title,o=t.desc;this.M_serviceSearchGo(t),this.report({clickZone:"".concat(this.M_getClickZonePath(),".list[").concat(e,"].riskTag"),clickContent:i+o?" ".concat(o):"",expand:this.M_getJumpSubScene(t)},t)},onTapTranser:function(){var t=n()(this.fromPicker.formSelector.formValue),e=n()(this.toPicker.formSelector.formValue);this.$set(this.fromPicker.formSelector,"formValue",e),this.$set(this.toPicker.formSelector,"formValue",t),this.refresh([this.fromPicker,this.toPicker]),this.$forceUpdate(),this.report({clickZone:"".concat(this.M_getClickZonePath(),".transer"),clickContent:"",reportId:this.transferReportId,actionType:d.g.CLICK_TRANSFER})},onTapListItem:function(t,e){t.jumpInfo&&(this.M_serviceSearchGo(t),this.report({clickZone:"".concat(this.M_getClickZonePath(),".list[").concat(e,"]"),clickContent:"",expand:this.M_getJumpSubScene(t)},t))},onTapPolicy:function(t,e){this.M_serviceSearchGo(t),this.report({clickZone:"".concat(this.M_getClickZonePath(),".list[").concat(e,"].text"),clickContent:"详细政策",expand:this.M_getJumpSubScene(t)},t)},onTapAction:function(t,e){this.M_serviceSearchGo(t),this.report({clickZone:"".concat(this.M_getClickZonePath(),".list[").concat(e,"].action"),clickContent:t.title||"",expand:this.M_getJumpSubScene(t)},t)},onTapTel:function(t,e){this.M_serviceSearchGo(t),this.report({clickZone:"".concat(this.M_getClickZonePath(),".list[").concat(e,"].button"),clickContent:t.title||"",expand:this.M_getJumpSubScene(t)},t)},onTapPicker:function(t){var e=this,i=this,o=i.source.forms.indexOf(t),r=t.formSelector;a.a.cityPicker({id:+new Date,className:"long-distance-bus__picker",title:r.title,desc:r.desc,supports:r.support,defaultValue:r.formValue.length?r.formValue:this.getLocationArray(r.realAnchor||r.anchor),rules:r.showList,onConfirm:function(c){r.formValue=c.filter((function(t){return t.label})),i.$set(e.source.forms,o,t),i.refresh([t]),e.report({clickZone:"".concat(e.M_getClickZonePath(),".forms[").concat(o,"].confirm"),clickContent:t.formSelector.formValue.join("·")})}}).then((function(t){e.weuiPicker=t})),this.report({clickZone:"".concat(this.M_getClickZonePath(),".forms[").concat(o,"]"),clickContent:t.formSelector.formValue.join("·")},t)},report:function(t,e){this.M_clickReport(Object.assign({resultType:this.data.resultType,resultSubType:this.data.subType,pageNo:this.data.vuePage,businessType:this.data.real_type||this.data.type,docId:this.item.docID,expand:this.item.subScene||""},t),e)},hide:function(){this.weuiPicker&&this.weuiPicker.hide()},init:function(){var t=this;this.source.forms&&this.source.forms.forEach((function(e){e.type==f.b.fromToCity&&(e.formSelector=e.locationSelector,!e.formSelector.realAnchor&&e.formSelector.anchor?(e.formSelector.formValue=t.getLocationArray(e.formSelector.anchor),e.formSelector.formValue.length):e.formSelector.formValue=[])}))},getLocationArray:function(t){if(!t)return[];var e=[];return t.province&&e.push(t.province),t.city&&e.push(t.city),t.distinct&&e.push(t.distinct),e},refresh:function(t){var e=this,i=this,o={cgiName:this.source.cgi.name,data:v(v({},this.source.cgi.params),{},{from:this.getLocationParams(this.fromPicker.formSelector.formValue),to:this.getLocationParams(this.toPicker.formSelector.formValue)}),target:this,refreshType:"doc"};t.forEach((function(t){t.status=k.loading})),s.h.getServiceCommCgiData(o).then((function(o){o.refreshItem?e.$emit("replace-renderItem",o.refreshItem):(i.$set(e.source,"travelPolicyList",o.list),i.$set(e.item.zoneHeader,"desc",o.desc)),t.forEach((function(t){t.status=k.success}))}))},getLocationParams:function(t){return{province:t[0]&&t[0].toString()||"",city:t[1]&&t[1].toString()||"",distinct:t[2]&&t[2].toString()||""}}}},P=(i(2454),i(4)),y=Object(P.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"travel-policy"},[i("div",{staticClass:"form-box"},[i("ui-dropdown",{staticClass:"form-selector",attrs:{placeholder:t.fromPicker.hint,tabindex:"-1","data-report-id":t.M_itemReportId(t.fromPicker)},nativeOn:{click:function(e){return e.stopPropagation(),t.onTapPicker(t.fromPicker)}}},[i("div",{staticClass:"form-selector-content location-selector-content"},[i("p",{class:{"form-selector-value":t.fromPicker.formSelector.formValue&&t.fromPicker.formSelector.formValue.join("·")}},[i("span",{staticClass:"city-name"},[t._v(t._s(t.fromPicker.formSelector.formValue&&t.fromPicker.formSelector.formValue.join("·")||t.fromPicker.hint))]),t.fromPicker.status===t.PickerStatus.loading?i("span",{staticClass:"circle-loading"}):t._e()])])]),i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"icon-transfer active__mask",attrs:{role:"button",tabindex:"-1","aria-label":"交换地区","data-report-id":t.M_itemReportId(t.transferReportId)},on:{click:function(e){return e.stopPropagation(),t.onTapTranser.apply(null,arguments)}}},[i("ui-image",{attrs:{url:"https://res.wx.qq.com/t/fed_upload/f8d7a901-98c1-4bc4-9e0b-6ede90871475/transfer.svg"}})],1),i("ui-dropdown",{staticClass:"form-selector",attrs:{placeholder:t.toPicker.hint,tabindex:"-1","data-report-id":t.M_itemReportId(t.toPicker)},nativeOn:{click:function(e){return e.stopPropagation(),t.onTapPicker(t.toPicker)}}},[i("div",{staticClass:"form-selector-content location-selector-content"},[i("p",{class:{"form-selector-value":t.toPicker.formSelector.formValue&&t.toPicker.formSelector.formValue.join("·")}},[i("span",{staticClass:"city-name"},[t._v(t._s(t.toPicker.formSelector.formValue&&t.toPicker.formSelector.formValue.join("·")||t.toPicker.hint))]),t.toPicker.status===t.PickerStatus.loading?i("span",{staticClass:"circle-loading"}):t._e()])])])],1),i("div",{staticClass:"detail-box"},[t._l(t.source.travelPolicyList,(function(e,o){return[i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:o,staticClass:"detail-item",class:{active__item:e.jumpInfo},attrs:{"data-report-id":t.M_itemReportId(e,o+1)},on:{click:function(i){return i.stopPropagation(),t.onTapListItem(e,o)}}},[i("div",{staticClass:"main"},[i("div",{staticClass:"main-header"},[i("div",{staticClass:"main-header__info"},[i("svg-icon",{staticClass:"icon-access",attrs:{name:""+t.WayType[e.way],"aria-label":e.way,role:"option"}}),i("div",{staticClass:"city-name"},[t._v(t._s(e.city))]),e.risk?i("div",{staticClass:"risk-level old",domProps:{innerHTML:t._s(t.xss(e.risk))}}):t._e(),e.riskTag?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"risk-level new",class:{active__mask:e.riskTag.jumpInfo},style:{backgroundColor:t.getRiskTagBgColor(e.riskTag.title)},attrs:{"data-report-id":t.M_itemReportId(e.riskTag,0,t.M_getItemPos(e))},on:{click:function(i){return i.stopPropagation(),t.onTapRiskLevel(e.riskTag,o)}}},[i("span",{staticClass:"risk-level__title",domProps:{innerHTML:t._s(t.xss(e.riskTag.title))}}),e.riskTag.desc?i("span",{staticClass:"risk-level__desc"},[t._v(t._s(e.riskTag.desc))]):t._e(),i("ui-arrow",{attrs:{size:"small",gap:"",align:"flex"}})],1):t._e()],1),e.button?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"button active__mask",attrs:{"data-report-id":t.M_itemReportId(e.button,0,t.M_getItemPos(e))},on:{click:function(i){return i.stopPropagation(),t.onTapTel(e.button)}}},[e.button.iconUrl?i("ui-image",{staticClass:"ui-menu-icon",attrs:{url:e.button.iconUrl,size:20}}):t._e(),i("span",[t._v("电话咨询")])],1):t._e()]),e.policy?i("ui-clamp",{directives:[{name:"active",rawName:"v-active.stop",value:e.policy.jumpInfo,expression:"item.policy.jumpInfo",modifiers:{stop:!0}}],staticClass:"policy active__mask",attrs:{role:"button",autoresize:"","max-lines":e.policy.ellipsis||3,"data-report-id":t.M_itemReportId(e.policy,0,t.M_getItemPos(e))},nativeOn:{click:function(i){return i.stopPropagation(),t.onTapPolicy(e.policy,o)}},scopedSlots:t._u([{key:"after",fn:function(){return[e.policy.linkTitle?i("span",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"more-link active__link",on:{click:function(i){return i.stopPropagation(),t.onTapPolicy(e.policy,o)}}},[t._v(t._s(e.policy.linkTitle))]):t._e()]},proxy:!0}],null,!0)},[t._v("\n            "+t._s(e.policy.title)+"\n            ")]):t._e(),e.action?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"action active__mask",attrs:{role:"button","data-report-id":t.M_itemReportId(e.action,0,t.M_getItemPos(e))},on:{click:function(i){return i.stopPropagation(),t.onTapAction(e.action,o)}}},[t._v("\n            "+t._s(e.action.title)+"\n          ")]):t._e(),e.menus?i("ui-column",{staticClass:"menu",staticStyle:{"margin-top":"12px"},attrs:{col:2,fill:"",list:e.menus},scopedSlots:t._u([{key:"default",fn:function(r){var c=r.item,n=r.index;return[i("ui-link",{attrs:{title:c.title,desc:c.desc,"icon-url":c.iconUrl,"icon-size":20,"data-report-id":t.M_itemReportId(c,n+1,t.M_getItemPos(e))},nativeOn:{click:function(e){return e.stopPropagation(),t.onTapMenu(c,o,n)}}})]}}],null,!0)}):t._e()],1)])]}))],2)])}),[],!1,null,"c970770c",null);e.default=y.exports},2454:function(t,e,i){"use strict";i(1718)},575:function(t,e,i){},625:function(t,e,i){"use strict";i(575)},632:function(t,e,i){"use strict";var o={name:"UiDropdown",props:{value:{type:String,default:""},placeholder:{type:String,default:""},direction:{type:String,default:"down"},role:{type:String,default:"button"}}},r=(i(625),i(4)),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"ui-dropdown",attrs:{role:t.role,tabindex:"-1"}},[i("p",{staticClass:"wording",class:{placeholder:!t.value}},[t.$slots.default?[t._t("default")]:[t._v("\n      "+t._s(t.value?t.value:t.placeholder)+"\n    ")]],2),i("ui-arrow",{attrs:{direction:t.direction,align:"flex"}})],1)}),[],!1,null,"586742ec",null).exports;c.install=function(t){t.component(c.name,c)};e.a=c}}]);