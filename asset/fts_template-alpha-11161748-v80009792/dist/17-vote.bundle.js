(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1407:function(t,e,n){},1408:function(t,e,n){},2033:function(t,e,n){"use strict";n(1407)},2034:function(t,e,n){"use strict";n(1408)},2198:function(t,e,n){"use strict";n.r(e);var o=n(489),i=n(39),a=n(737),r=n(0),s=n(3),c=n(8),u=n(826),l=n(827),p=n(1),f=n.n(p),d=n(18),v=n.n(d),m=n(86),h=n(600);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var _={name:"UiVote",components:{UiIconLoading:m.a,UiAvatarsRow:h.a},props:{options:{type:Array,default:function(){return[]}}},data:function(){return{halfScreenRenderOption:null}},computed:{_options:function(){return this.options.map((function(t){return"object"===v()(t)?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({text:"",state:{}},t):{text:String(t),state:{}}}))}},methods:{hideHalfScreen:function(){this.$refs._halfScreen&&this.$refs._halfScreen.hide()},onTapOption:function(t){this.$emit("tap:option",t)},onTapAvatarRow:function(t){var e=this;this.$emit("tap:avatar-row",t),this.halfScreenRenderOption=t.option,this.$nextTick((function(){e.$refs._halfScreen&&e.$refs._halfScreen.show()}))},onTapAvatar:function(t){this.$emit("tap:avatar",t)}}},k=(n(2033),n(4)),b=Object(k.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-vote"},[t._l(t._options,(function(e,o){return n("div",{key:"ui-vote-option-"+(o+e.text),staticClass:"ui-vote-option",class:{"ui-vote-option-selected":e.state.selected},attrs:{role:"button"},on:{click:function(n){return n.stopPropagation(),t.onTapOption({option:e,index:o})},touchstart:function(t){t.stopPropagation()}}},[t.$scopedSlots.default?[t._t("default",null,{option:e})]:n("div",{staticClass:"ui-vote-content-wrapper"},[n("div",{staticClass:"ui-vote-content-left"},[n("div",{staticClass:"ui-vote-option-text"},[t._v("\n          "+t._s(e.text)+"\n          "),e.desc?n("span",{staticClass:"ui-vote-option-desc"},[n("span",{staticClass:"ui-aria-hidden"},[t._v(".")]),t._v("\n            "+t._s(e.desc)+"\n          ")]):t._e()]),e.voter?n("ui-avatars-row",{directives:[{name:"active",rawName:"v-active"}],attrs:{direction:"left",list:e.voter.map((function(t){return t.avatar})),wrap:"","aria-hidden":"true"},nativeOn:{click:function(n){return n.stopPropagation(),t.onTapAvatarRow({option:e,index:o})}}},[n("ui-arrow",{attrs:{gap:""}})],1):t._e()],1),n("span",{staticClass:"ui-aria-hidden"},[t._v(".")]),e.state.loading?n("ui-icon-loading"):e.state.selected?n("ui-icon",{attrs:{name:"done",role:"option","aria-label":"已勾选"}}):t._e()],1)],2)})),t.halfScreenRenderOption?[n("ui-half-screen",{ref:"_halfScreen",attrs:{"can-scroll":"",header:{title:t.halfScreenRenderOption.text,close:!0}}},[n("div",{staticClass:"ui-user-list-wrapper"},t._l(t.halfScreenRenderOption.voter,(function(e,o){return n("div",{key:e.openId+e.avatar+e.name,staticClass:"ui-user-detail",on:{click:function(n){return n.stopPropagation(),t.onTapAvatar({voter:e,index:o})}}},[n("div",{directives:[{name:"load-background",rawName:"v-load-background:avatar",value:e.avatar,expression:"voter.avatar",arg:"avatar"}],staticClass:"ui-user-detail-avatar"}),n("p",{staticClass:"ui-user-detail-name"},[t._v(t._s(e.name))])])})),0)])]:t._e()],2)}),[],!1,null,"5600eca8",null).exports;b.install=function(t){t.component(b.name,b)};var y=b,w={name:"Vote",components:{LookALookTip:a.a,BlockHd:o.a,Egg:u.a,SyncToLookALookTips:l.a,UiVote:y},mixins:[i.a],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{voteObject:this.item.vote,withoutEnter:!0}},computed:{renderOptions:function(){var t=this;return this.voteObject.voteInfoList.map((function(e){var n=(e.selectNum||0)+(e.selectBySelf||0),o={text:e.voteName,desc:n?"".concat(n,"票"):"",voter:e.userInfo?e.userInfo.map((function(t){return{name:t.nickname,avatar:t.headImgUrl,openId:t.openId}})):null,state:{selected:!!e.selectBySelf,loading:e.isLoading}};if(e.selectBySelf){o.voter||(o.voter=[]);var i=t.voteObject.selfUserInfo;o.voter.push({name:i.nickname,avatar:i.headImgUrl,openId:i.openId})}return 1===t.voteObject.anonymous&&(o.voter=null,o.desc=""),o}))},showEgg:function(){return this.voteObject.voteInfoList.filter((function(t){return t.selectBySelf||!1})).length},header:function(){return this.item.header||{}}},watch:{item:function(){this.voteObject=this.item.vote}},created:function(){var t=this;c.b.onInputChange((function(){var e=t.$refs.vote;e&&e.hideHalfScreen()})),c.b.onInputConfirm((function(){var e=t.$refs.vote;e&&e.hideHalfScreen()})),s.a.$on(s.b.BACK_BUTTON_CLICK,(function(){var e=t.$refs.vote;e&&e.hideHalfScreen()}))},mounted:function(){var t=this;this.$nextTick((function(){t.withoutEnter=!1}))},methods:{onTap:function(){this.M_canHeaderJump&&(this.M_go(this.header),this.M_clickReport({clickZone:1,clickContent:this.header.title}),this.$emit("tap"))},onVote:function(t){var e=this,n=t.option,o=t.index;if(!this._isLoading){this._isLoading=!1,this.$set(this.voteObject.voteInfoList[o],"isLoading",!0);var i=setTimeout((function(){e.$set(e.voteObject.voteInfoList[o],"isLoading",!1)}),3e3);this._isLoading=!0;var a=this.voteObject.voteInfoList.map((function(t,e){return[t.voteId,e!==o||t.selectBySelf?0:1]}));r.h.getCommonCgiData({cgiName:"S1SVoteTopicInfo",data:{docid:this.voteObject.voteDocId,voteinfo:a.map((function(t){return t.join("_")})).join("_")}}).then((function(t){clearTimeout(i),e._isLoading=!1,e.$set(e.voteObject.voteInfoList[o],"isLoading",!1),0!==t.ret||e.voteObject.voteInfoList.forEach((function(t,n){var i=e.voteObject.voteInfoList[n];e.$set(i,"selectBySelf",n!==o||i.selectBySelf?0:1)}))})),this.M_clickReport({clickZone:2,clickContent:(this.voteObject.voteInfoList[o].selectBySelf?"取消":"选中")+n.text}),this.$emit("tap")}},onTapAvatarRow:function(t){var e=t.option;this.M_clickReport({clickZone:3,clickContent:e.text}),this.$emit("tap")},onTapEggButton:function(){this.M_clickReport({clickZone:4,clickContent:this.item.egg.button.title}),this.M_go(this.item.egg.button),this.$emit("tap")},onTapInfo:function(){this.M_clickReport({clickZone:5,clickContent:"tip"}),this.$emit("tap")}}},j=(n(2034),Object(k.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.item.docID,staticClass:"vote oz__item",attrs:{"data-id":t.M_exposeId()},on:{click:t.onTap}},[n("block-hd",t._b({},"block-hd",t.$props,!1)),n("div",{staticClass:"vote-content"},[n("h3",{staticClass:"title"},[n("span",{staticClass:"title-text"},[t._v("\n        "+t._s(t.item.vote.title)+"\n      ")]),n("span",{staticClass:"ui-tag-wrapper"},t._l(t.item.vote.tag,(function(t){return n("ui-tag",{key:t.title+t.type,attrs:{title:t.title,desc:t.desc,type:t.type}})})),1)]),t.renderOptions?n("ui-vote",{ref:"vote",attrs:{options:t.renderOptions},on:{"tap:option":t.onVote,"tap:avatar-row":t.onTapAvatarRow}}):t._e(),t.item.vote.info?n("sync-to-look-a-look-tips",{attrs:{info:t.item.vote.info,tip:t.item.vote.tip},on:{"tap:info":t.onTapInfo}}):t._e(),t.showEgg?n("egg",{attrs:{egg:t.item.egg,"without-enter":t.withoutEnter},on:{"tap:button":t.onTapEggButton}}):t._e()],1),t.item.vote.tip?n("look-a-look-tip",{ref:"lookalookTip",attrs:{tip:t.item.vote.tip}}):t._e()],1)}),[],!1,null,"244ed768",null));e.default=j.exports},459:function(t,e,n){"use strict";var o={methods:{ozJump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;e.M_confirm_go(t.dialog,t)}},computed:{M_canHeaderJump:function(){return!!this.item.header&&!!(this.item.header.jumpUrl||this.item.header.weappUrl||this.item.header.jumpInfo)}}};e.a=o},470:function(t,e,n){},471:function(t,e,n){},486:function(t,e,n){"use strict";n(470)},487:function(t,e,n){"use strict";n(471)},489:function(t,e,n){"use strict";var o=n(39),i=n(459),a={props:{title:{type:String,default:""},tags:{type:Array,default:function(){return[]}},jump:{type:Boolean,default:!0},moreText:{type:String,default:""}}},r=(n(486),n(4)),s=Object(r.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"oz__header line",class:{active__item:t.jump},attrs:{role:t.jump?"button":"option"}},[n("div",{staticClass:"line__item oz__header-word",class:{flex1:t.jump&&t.moreText}},[n("p",[t._v(t._s(t.title))]),t.tags.length?n("ui-tags",{attrs:{flex:"",tags:t.tags}}):t._e()],1),t.jump&&!t.moreText?n("ui-arrow",{attrs:{gap:0,align:"flex"}}):t.jump&&t.moreText?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"oz__header-more active__mask",on:{click:function(e){return e.stopPropagation(),t.$emit("tap:more",{zone:3,content:"更多"})}}},[t._v("\n    "+t._s(t.moreText)+"\n    "),n("ui-arrow")],1):t._e()],1)}),[],!1,null,null,null).exports,c=n(0),u=n(2),l={components:{accessHeader:s},mixins:[c.k,o.a,i.a],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},computed:{header:function(){return this.item.header||{}},jump:function(){return!!(this.header.jumpUrl||this.header.weappUrl||this.header.jumpInfo)},moreText:function(){return this.header.moreText||c.g.L("更多")}},methods:{tap:function(t){var e=this;c.g.isObjectEmpty(t)&&(t={zone:1});var n=t.zone;c.g.fastClickCheck((function(){var o=e,i=JSON.parse(JSON.stringify(o.header)),a=i.jumpInfo,r={parentSearchID:e.M_composeParentSid({t:e.item.parentType||0,s:c.b.searchId,did:e.item.docID,rid:e.$store.state.result.previousRid}),crossExtReqParams:[{key:"cookies",textValue:e.$store.state.result.state.cookies}],subType:a&&a.subType||e.data.subType||""};a?a.jumpType===u.l.VERTICAL?a=Object.assign({extParams:r},a):a.jumpType===u.l.H5&&(a.jumpUrl=c.g.addParamsToURLSearch(c.g.object2params({tmplByPassJson:JSON.stringify(r)}),a.jumpUrl)):i.jumpUrl&&(i.jumpUrl=c.g.addParamsToURLSearch(c.g.object2params({tmplByPassJson:JSON.stringify(r)}),i.jumpUrl)),o.ozJump(a||o.header),o.M_clickReport({clickZone:n||1,clickContent:t.content||o.header.title})}),2e3),this.$emit("tap")}}},p=(n(487),Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.item.header?n("accessHeader",{attrs:{title:t.item.header.title,jump:t.jump,tags:t.item.header.tag,"more-text":t.moreText},on:{"tap:more":t.tap},nativeOn:{click:function(e){return e.stopPropagation(),t.tap.apply(null,arguments)}}}):t._e()}),[],!1,null,null,null));e.a=p.exports},555:function(t,e,n){},588:function(t,e,n){"use strict";n(555)},600:function(t,e,n){"use strict";var o={name:"UiAvatarsRow",props:{list:{type:Array,default:function(){return[]}},direction:{type:String,default:"left"},wrap:{type:Boolean,default:!1}},data:function(){return{}}},i=(n(588),n(4)),a=Object(i.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"ui-avatars-row",class:{"ui-avatars-row_right":"right"===this.direction,"ui-avatars-row_wrap":this.wrap}},[this._l(this.list,(function(t,n){return e("li",{directives:[{name:"load-background",rawName:"v-load-background:avatar",value:t,expression:"avatar",arg:"avatar"}],key:n,staticClass:"ui-avatar"})})),e("li",{staticClass:"ui-extra"},[this._t("default")],2)],2)}),[],!1,null,"767492ae",null).exports;a.install=function(t){t.component(a.name,a)};e.a=a},713:function(t,e,n){},714:function(t,e,n){},715:function(t,e,n){},737:function(t,e,n){"use strict";var o={name:"LookALookTip",props:{tip:{type:Object,default:function(){return{}}}},methods:{show:function(){this.$refs._lookalookTip.show()},hide:function(){this.$refs._lookalookTip.hide()},onTapButton:function(){this.hide(),this.$emit("confirm")}}},i=(n(804),n(4)),a=Object(i.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-half-screen",{ref:"_lookalookTip",attrs:{"class-name":"look-a-look-tip"},scopedSlots:t._u([{key:"footer",fn:function(){return[n("a",{staticClass:"weui-btn weui-btn_default",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.onTapButton.apply(null,arguments)}}},[t._v("\n      "+t._s(t.tip.button)+"\n    ")])]},proxy:!0}])},[n("div",{staticClass:"header",attrs:{role:"option"}},[n("ui-image",{staticClass:"icon",attrs:{url:"https://res.wx.qq.com/a/fed_upload/2ca94ec4-e220-411d-950c-04f3fcb46851/news.svg"}}),n("h3",[t._v(t._s(t.tip.title)),n("span",{staticClass:"ui-aria-hidden"},[t._v(".")])]),n("p",[t._v(t._s(t.tip.desc))])],1),n("div",{staticClass:"tip-image"})])}),[],!1,null,"4466cbd0",null);e.a=a.exports},804:function(t,e,n){"use strict";n(713)},805:function(t,e,n){"use strict";n(714)},806:function(t,e,n){"use strict";n(715)},826:function(t,e,n){"use strict";var o={name:"Egg",components:{HeightAnimate:n(42).a},props:["egg","withoutEnter","withoutLeave"],methods:{onTapEggButton:function(){this.$emit("tap:button",this.egg.button)}}},i=(n(805),n(4)),a=Object(i.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.egg?n("height-animate",{attrs:{"without-enter":t.withoutEnter,"without-leave":t.withoutLeave}},[n("div",{staticClass:"egg"},[n("div",{staticClass:"text"},[n("ui-image",{staticClass:"egg-icon",attrs:{type:"img",url:t.egg.iconUrl}}),n("span",[t._v("\n        "+t._s(t.egg.text)+"\n      ")])],1),t.egg.button?n("a",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"weui-btn weui-btn_primary",on:{click:function(e){return e.stopPropagation(),t.onTapEggButton.apply(null,arguments)}}},[t._v("\n      "+t._s(t.egg.button.title)+"\n    ")]):t._e()])]):t._e()}),[],!1,null,"7a98ebde",null);e.a=a.exports},827:function(t,e,n){"use strict";var o={name:"SyncToLookALookTips",components:{LookALookTip:n(737).a},props:["info","tip"],methods:{onTapInfo:function(){this.tip&&this.$refs.lookalookTip.show(),this.$emit("tap:info")}}},i=(n(806),n(4)),a=Object(i.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"sync-to-look-a-look-tips expand-hotspot__vertical active__mask",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.onTapInfo.apply(null,arguments)}}},[n("span",[t._v(t._s(t.info.text))]),n("span",{staticClass:"info-icon-wrapper",attrs:{"aria-hidden":"true"}},[t.info.iconUrl&&t.tip?n("ui-image",{staticClass:"info-icon",attrs:{url:t.info.iconUrl}}):t._e()],1),t.tip?n("look-a-look-tip",{ref:"lookalookTip",attrs:{tip:t.tip}}):t._e()],1)}),[],!1,null,"74f71d20",null);e.a=a.exports}}]);