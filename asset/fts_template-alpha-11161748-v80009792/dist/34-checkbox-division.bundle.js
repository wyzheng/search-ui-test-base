(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{510:function(e,t,i){"use strict";i.r(t);var n=i(1),s=i.n(n),d=i(0);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var c={name:"CheckboxDivision",mixins:[d.m,d.k],props:{source:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{selectedList:[],options:[],disabled:!0,hiddenRowMap:{}}},computed:{itemInfo:function(){return d.g.isObjectEmpty(this.source)?this.item:this.source}},watch:{"itemInfo.options":{handler:function(e){e&&(this.options=e.map((function(e){return r(r({hidden:!1,hiddenTip:"",height:-1},e),{},{list:e.list.map((function(e){return r({selected:!1},e)}))})})))},immediate:!0},"itemInfo._selectedList":{handler:function(e){var t=this;e&&this.options.forEach((function(i,n){i.list.forEach((function(i){var s=e.findIndex((function(e){return i.title===e}));i.selected=s>-1,t.selectedList[n]||(t.selectedList[n]=[]),i.selected&&(t.selectedList[n].push(i),void 0!==i.hiddenIndex&&(t.options[i.hiddenIndex].hiddenTip=i.hiddenTip,t.hiddenRowMap[i.hiddenIndex]=!0,t.selectedList[i.hiddenIndex]&&(t.selectedList[i.hiddenIndex]=[]),t.$nextTick((function(){t.$refs.uiColumn&&t.$refs.uiColumn[i.hiddenIndex]&&(t.options[i.hiddenIndex].height=t.$refs.uiColumn[i.hiddenIndex].$el.clientHeight),t.options[i.hiddenIndex].hidden=!0})))),t.disabled=t.getDisabled()}))}))},immediate:!0}},methods:{getDisabled:function(){for(var e=0;e<this.options.length;e++){if(this.hiddenRowMap[e])return!1;if(!this.selectedList[e])return!0;var t=this.selectedList[e].length,i=this.options[e],n=i.minCount,s=void 0===n?1:n,d=i.maxCount;if(t>(void 0===d?1:d)||t<s)return!0}return!1},onTapItem:function(e){var t=e.option,i=e.item,n=e.optIndex;e.index;if(!this.locked){this.locked=!0,this.selectedList[n]||(this.selectedList[n]=[]);t.minCount;var s=t.maxCount,d=void 0===s?1:s;if(i.selected=!i.selected,i.selected){if(this.selectedList[n].push(i),void 0===i.hiddenIndex?(this.hiddenRowMap={},this.options.forEach((function(e){e.hidden=!1}))):(this.$refs.uiColumn&&this.$refs.uiColumn[i.hiddenIndex]&&!this.options[i.hiddenIndex].hidden&&(this.options[i.hiddenIndex].height=this.$refs.uiColumn[i.hiddenIndex].$el.clientHeight),this.options[i.hiddenIndex].hiddenTip=i.hiddenTip,this.hiddenRowMap[i.hiddenIndex]=!0,this.options[i.hiddenIndex].hidden=!0,this.selectedList[i.hiddenIndex]&&(this.selectedList[i.hiddenIndex].forEach((function(e){e.selected=!1})),this.selectedList[i.hiddenIndex]=[])),this.selectedList[n].length>d)this.selectedList[n].shift().selected=!1}else{var o=this.selectedList[n].findIndex((function(e){return e.title===i.title}));o>-1&&this.selectedList[n].splice(o,1)}this.disabled=this.getDisabled(),this.locked=!1}},onConfirm:function(){this.disabled||this.$emit("tap:target",{target:{selectedList:this.selectedList},clickZoneAfter:".itemInfo"})}}},l=(i(768),i(4)),h=Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.options?i("div",{staticClass:"option-wrap"},[i("div",{staticClass:"option-list"},[e._l(e.options,(function(t,n){return[i("div",{key:t.title,staticClass:"option-item"},[i("p",{staticClass:"option-title",domProps:{innerHTML:e._s(e.xss(t.title))}}),i("p",{directives:[{name:"show",rawName:"v-show",value:t.hidden,expression:"option.hidden"}],key:t.title,staticClass:"hidden-tip",style:{height:t.height+"px"},domProps:{innerHTML:e._s(e.xss(t.hiddenTip))}}),t.list&&t.list.length?i("ui-column",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!option.hidden"}],ref:"uiColumn",refInFor:!0,attrs:{list:t.list,col:3},scopedSlots:e._u([{key:"default",fn:function(s){var d=s.item,o=s.index;return[i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"opt-list-item",class:{selected:d.selected},attrs:{role:"button"},on:{click:function(i){return i.stopPropagation(),e.onTapItem({option:t,item:d,optIndex:n,index:o})}}},[e._v("\n              "+e._s(d.title)+"\n            ")])]}}],null,!0)}):e._e()],1)]}))],2),e.itemInfo.confirm?i("div",{staticClass:"confirm-btn"},[i("a",{staticClass:"weui-btn weui-btn_primary",class:{"weui-btn_disabled":e.disabled},attrs:{role:"button"},on:{click:function(t){return t.stopPropagation(),e.onConfirm.apply(null,arguments)}}},[e._v(e._s(e.itemInfo.confirm.title))])]):e._e()]):e._e()}),[],!1,null,"2617286b",null);t.default=h.exports},680:function(e,t,i){},768:function(e,t,i){"use strict";i(680)}}]);