(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1170:function(e,t,a){},1807:function(e,t,a){"use strict";a(1170)},2248:function(e,t,a){"use strict";a.r(t);var o=a(660),n=a(66),i=a(39),r=a(3),s=a(17),c=a(563),u=a(637),d=a.n(u),p={name:"MoreFriends",mixins:[i.a,c.a],props:{info:{type:Object,default:function(){return{}}}},data:function(){return{defaultAvatar:d.a,showList:[],maxDisplayNum:5,docId:this.info.docID||"avatarWall"}},created:function(){var e=this;e.getMoreInfo(),r.a.$on(r.b.CLIENT_NAME_DONE,(function(t){e.showList.forEach((function(a){t[a.userName]&&e.$set(a,"nickName",t[a.userName])}))})),s.b.onImageReady((function(t){e.showList.forEach((function(a){t[a.userName]&&e.$set(a,"thumb",t[a.userName])}))}))},mounted:function(){var e=this.$refs,t=e.thumb,a=e.word,o=e.name,n=document.documentElement.clientWidth-a.clientWidth-o.clientWidth-32-4,i=t[0].$el.clientWidth,r=Math.floor(n/(i+4));this.showList=this.showList.slice(0,r)},methods:{getMoreInfo:function(){var e=this;e.info.userNameList.some((function(t){return Object(o.a)({userName:t}),n.a._getAvatar({id:t,userName:t,type:e.data.type}),e.showList.push({userName:t}),e.showList.length>=e.maxDisplayNum}))}}},m=(a(1807),a(4)),l=Object(m.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showList&&e.showList.length?a("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"more-friends active__item",attrs:{role:"link","data-id":e.docId+"&"+e.data.type},on:{click:function(t){return t.stopPropagation(),e.onTap.apply(null,arguments)}}},[a("div",{staticClass:"moment__thumb-wall"},e._l(e.showList,(function(e){return a("div",{key:e.userName,staticClass:"moment__thumb-wrapper"},[a("ui-image",{ref:"thumb",refInFor:!0,staticClass:"moment__thumb",attrs:{url:e.thumb,size:28,mode:"avatar","allow-empty":""}})],1)})),0),a("div",{staticClass:"moment__wording"},[a("span",{ref:"name",staticClass:"one-name"},[e._v(e._s(e.showList[e.showList.length-1].nickName)+" ")]),a("span",{ref:"word",staticClass:"moment__share"},[e._v(e._s(e.info.title))])])]):e._e()}),[],!1,null,"8ccdd052",null);t.default=l.exports},563:function(e,t,a){"use strict";var o=a(1),n=a.n(o),i=a(0),r=(a(16),a(2)),s=a(5),c=a(25);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}t.a={mixins:[i.k,i.m],props:["type","typePos","data","hideArrow"],computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(c.c)({category:function(e){return e.result.unitData.category}})),methods:{_isMatchTab:function(e){var t=e.tabType;if(!t)return!1;if(!this.category||!this.category.length)return!1;var a=null;return this.category.some((function(e,o){return e.type==t&&(a={unit:e,index:o},!0)})),a},onTap:function(){var e=this,t=e.data.moreInfo||{},a=e._isMatchTab(t);e.M_clickReport({businessType:e.data.real_type||e.data.type,docId:e.docId||"more",reportId:e.data.reportId,docPos:0,typePos:e.typePos,isHomePage:i.b.isHomePage,sceneActionType:i.b.sceneActionType,skipDocInfo:!0,actionType:a?r.g.TAB_CHANGE:null},e.data.moreInfo),a?e._jumpToTab(a):e._normalHandler()},_jumpToTab:function(e){var t=this,a=t.data.moreInfo||{};i.a.$emit(i.j.switchTab,{unit:e.unit,index:e.index,parentType:r.p.MORE,docID:a.moreID,newSearchType:r.t.MORE,reportDocId:t.docId||"more",businessType:t.data&&(t.data.real_type||t.data.type),mixerCommonContext:a.mixerCommonContext||""})},_normalHandler:function(){var e=this,t=e.data.moreInfo||{},a=t.jumpUrl||e.data.moreUrl||e.data.moreWebUrl||"",o=i.g.object2params({scene:i.b.scene,sessionid:i.b.sessionId});if(a)/\?/.test(a)?a=a.replace(/\?/,"?".concat(o,"&")):a+="?".concat(o),e.M_startDetail({jumpUrl:a,position:1,type:e.type,docID:"more",sessionId:i.b.sessionId||"",subSessionId:i.b.subSessionId||""});else if(e.data.moreAction)e.M_go({jumpType:r.l.WE_APP,userName:e.data.moreAction.username||e.data.moreAction.userName,relativeURL:e.data.moreAction.path||e.data.moreAction.weappUrl,appVersion:e.data.moreAction.appVersion,debugMode:e.data.moreAction.debugMode||0,docId:"More",subScene:i.g.genWeAppSubScene({adBuffer:"",clickId:(new Date).getTime(),type:e.data.type,subType:e.data.subType}),clickExtInfo:{isHomePage:i.b.isHomePage,h5version:i.b.version,clickId:(new Date).getTime(),businessType:e.data.type,subType:e.data.subType,isClickMore:!1}});else if(t.jumpInfo)e.M_go(t.jumpInfo);else{var n,c,u,d,p,m,l,f;e.M_openSearchWebView({actionType:3,extParams:encodeURIComponent(JSON.stringify({crossExtReqParams:[{key:"parentSearchID",textValue:e.M_composeParentSid({t:r.p.MORE,s:i.b.searchId,did:"more",rid:this.$store.state.result.previousRid})},{key:"subScene",uintValue:e.type===s.c.APP_ACC?1:0},{key:"cookies",textValue:e.$store.state.result.state.cookies}],subType:e.data.subType||""})),jumpUrl:"",type:e.data.real_type||e.data.type,subType:e.data.subType,query:i.b.query,isMoreButton:!0,docID:"more",hideSearchBar:t.hideSearchBar,navBarColor:i.g.isDarkMode()?"#222222":"#FFFFFF",statusBarStyle:i.g.isDarkMode()?"white":"black",nativeConfig:{title:t.title||"搜一搜"}}),i.f.reportJumpType({businessType:(null===(n=e.data)||void 0===n?void 0:n.real_type)||(null===(c=e.data)||void 0===c?void 0:c.type),subType:null===(u=e.data)||void 0===u?void 0:u.subType,pageType:r.o[null===(d=e.$route)||void 0===d?void 0:d.name],docId:e.docId||"more",clickId:null===(p=e.$store)||void 0===p||null===(m=p.state)||void 0===m||null===(l=m.result)||void 0===l||null===(f=l.state)||void 0===f?void 0:f.clickReportId,clickType:2,newSearchType:r.t.MORE})}}}}},637:function(e,t,a){e.exports=a.p+"870f14bafa0f3fa70d322e158ba93c57.png"},660:function(e,t,a){"use strict";var o,n,i,r=a(0),s=a(3);t.a=(n=[],i={},function(e){n.some((function(t){return t.userName===e.userName}))||n.push({id:e.vueId,userName:e.userName,nickName:e.nickName||"",alias:e.alias||""}),o||(o=setTimeout((function(e){r.g.WeixinJSBridgeInvoke("getSearchDisplayNameList",{data:n.splice(0)},(function(e){if(e&&(0==+e.retCode||0==+e.ret)&&e.data){e.data="string"==typeof e.data?JSON.parse(e.data):e.data;var t={};e.data.forEach((function(e){t[e.userName]=e.displayName})),i=Object.assign(t),s.a.$emit(s.b.CLIENT_NAME_DONE,i)}})),o=null}),200))})}}]);