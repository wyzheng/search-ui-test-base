(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{1174:function(t,i,e){},1811:function(t,i,e){"use strict";e(1174)},2250:function(t,i,e){"use strict";e.r(i);var a=e(1),n=e.n(a),s=e(0),o=e(2),c=e(16),r=e(723),l=e(733),u=e(822),p=e(565);function m(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,a)}return e}function d(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?m(Object(e),!0).forEach((function(i){n()(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var f={components:{activityBannerBox:l.a,activityBtnBox:r.a,activityLiveBox:u.a,UiMenu:p.a},mixins:[s.m],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{desc:"",activityBtnBoxData:Object.assign({},this.item.activityBlock,{key:1})}},computed:{isShowMenu:function(){return this.item.menus&&this.item.menus.length},isShowSource:function(){return this.item.source&&Object.keys(this.item.source).length},activityBtn:function(){return this.activityBtnBoxData.button},renderDesc:function(){return this.desc||this.activityBtnBoxData.desc}},watch:{item:function(){this.desc=null,this.activityBtnBoxData=Object.assign({},this.item.activityBlock,{key:2})}},methods:{tap:function(){var t=this;2===this.item.activityType?this._handler():t.M_startDetail({jumpUrl:t.item.jumpUrl&&t.M_composeUrl(t.item.jumpUrl,d({},t.base))||""}),t.M_clickReport({title:t.item.title,jumpUrl:t.item.weappUrl||t.item.jumpUrl,docId:t.item.docID,pos:t.pos,typePos:t.typePos,clickZone:1,clickContent:t.item.title}),Object(c.f)(s.l.detail.result.operating)},tapMenu:function(t){var i,e=t.menu,a=t.index,n=this;if(1===e.type){var r=e.basicInfo,l=e.extInfo;this.M_jump({docId:n.item.docID,searchId:s.b.searchId,type:1,userName:r.UserName,nickName:r.NickName,headHDImgUrl:r.headImgUrl,bear:"",verifyFlag:r.VerifyFlag,signature:r.Signature,iconUrl:r.BrandIconURL,brandInfo:JSON.stringify(r.BrandInfo||{}),externalInfo:JSON.stringify(l||{})})}else e.userName?(i=e.weappUrl,this.M_go({jumpType:o.h.jumpType.WE_APP,userName:e.userName,weappUrl:i||"",docId:n.item.docID,subScene:s.g.genWeAppSubScene({adBuffer:e.adBuffer,clickId:(new Date).getTime(),type:n.data.type,subType:n.data.subType})})):(i=e.url,n.M_jump({jumpUrl:i,type:n.data.type}));n.M_clickReport({title:e.title,jumpUrl:i,docId:n.item.docID,pos:a+1,typePos:n.typePos,expand:"clickMenu",expand1:e.type||0,clickZone:2}),Object(c.f)(s.l.detail.result.operatingMe)},_handler:function(){var t=this,i=this.activityBtn;if(i.cgiName){if(i._isLoading)return;this.$set(i,"_isLoading",!0),s.h.getCommonCgiData({cgiName:i.cgiName,data:i.param}).then((function(i){i.errCode&&t.$store.commit("updateDialog",{title:i.errMsg,cancel:!1}),t.$set(t.activityBtn,"_isLoading",!1),2===t.item.activityType?i.activityBlock&&i.activityBlock.desc&&(t.desc=i.activityBlock.desc):t.$data.activityBtnBoxData=i.activityBlock}))}else this.M_confirm_go(this.item.dialog,i);2===this.item.activityType&&this.M_confirm_go(this.item.dialog,i)},onTapActivityBtn:function(){this._handler(),this.M_clickReport({title:this.item.title,docId:this.item.docID,pos:this.pos,typePos:this.typePos,clickZone:3,clickContent:this.activityBtn.title})}}},v=(e(1811),e(4)),h=Object(v.a)(f,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"opac expose_log_elem",attrs:{"data-id":t.M_exposeId()},on:{click:t.tap}},[e("div",{staticClass:"search_item_inner"},[1!==t.item.activityType&&t.item.title?e("div",{staticClass:"head"},[t.item.thumbUrl?e("div",{directives:[{name:"image",rawName:"v-image",value:t.item.thumbUrl,expression:"item.thumbUrl"}],staticClass:"thumb"}):t._e(),e("div",{staticClass:"title ellipsis_1",domProps:{innerHTML:t._s(t.xss(t.item.title))}}),t.xss(t.item.desc)?e("p",{staticClass:"desc ellipsis_2",domProps:{innerHTML:t._s(t.xss(t.item.desc))}}):t._e()]):t._e(),e("div",{staticClass:"body"},[1===t.item.activityType?e("activity-live-box",t._b({},"activity-live-box",t.$props,!1)):[e("activityBannerBox",t._b({key:t.item.docID+"activity-banner"},"activityBannerBox",t.$props,!1)),t.activityBtnBoxData&&t.activityBtnBoxData.title?e("activity-btn-box",{key:t.item.docID+"activity-btn-box",attrs:{title:t.activityBtnBoxData.title,desc:t.renderDesc,tag:t.activityBtnBoxData.tag,"is-loading":2!==t.item.activityType&&t.activityBtn&&t.activityBtn._isLoading,btn:t.activityBtn&&t.activityBtn.title,"can-click":t.activityBtn&&t.activityBtn.canClick},on:{"tap:btn":t.onTapActivityBtn}}):t.isShowMenu?e("ui-menu",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"menu",attrs:{source:t.item.menus},on:{"tap:menu":t.tapMenu}}):t._e()]],2),t.isShowSource?e("div",{staticClass:"foot source"},[t.item.source.iconUrl?e("span",{directives:[{name:"image",rawName:"v-image",value:t.item.source.iconUrl,expression:"item.source.iconUrl"}],staticClass:"source__icon"}):t._e(),e("div",{staticClass:"source__title"},[t._v("\n        "+t._s(t.item.source.title)+"\n      ")]),e("div",{staticClass:"source__sub"},[t._v("\n        "+t._s(t.item.source.comment)+"\n      ")])]):t._e()])])}),[],!1,null,"20b59cec",null);i.default=h.exports},496:function(t,i,e){},561:function(t,i,e){"use strict";e(496)},565:function(t,i,e){"use strict";var a={name:"UiMenu",props:{source:{type:Array,default:function(){return[]}},nowrap:{type:Boolean,default:!1},compact:{type:Boolean,default:!1}},methods:{tap:function(t,i){this.$emit("tap:menu",{menu:t,index:i,target:this.$el})},menuItemClassName:function(t){var i=this.source.length%3||3;return{"ui-menu-item":!0,"ui-menu-item-end":!this.nowrap&&this.source.length-t-1<i}}}},n=(e(561),e(4)),s=Object(n.a)(a,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.source&&t.source.length?e("div",{staticClass:"ui-menu",class:{"ui-menu-nowrap":t.nowrap,"ui-menu-compact":t.compact}},t._l(t.source,(function(i,a){return e("a",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:"menu-item-"+a,class:t.menuItemClassName(a),attrs:{role:"button",tabindex:"-1","data-report-id":i.itemReportId},on:{touchstart:function(t){t.stopPropagation()},click:function(e){return e.stopPropagation(),t.tap(i,a)}}},[t.$scopedSlots.default?[t._t("default",null,{item:i,index:a})]:[i.iconUrl?e("ui-image",{staticClass:"ui-menu-icon",attrs:{url:i.iconUrl,mode:"plain"}}):t._e(),i.title?e("h4",{directives:[{name:"xss-html",rawName:"v-xss-html",value:i.title,expression:"item.title"}],staticClass:"ui-menu-item-title"}):t._e(),i.desc?e("p",{directives:[{name:"xss-html",rawName:"v-xss-html",value:i.desc,expression:"item.desc"}],staticClass:"ui-menu-item-desc",attrs:{"aria-hidden":"true"}}):t._e()]],2)})),0):t._e()}),[],!1,null,"3cdbbeb0",null).exports;s.install=function(t){t.component(s.name,s)};i.a=s},609:function(t,i,e){},681:function(t,i,e){"use strict";e(609)},682:function(t,i,e){},723:function(t,i,e){"use strict";var a={mixins:[e(0).m],props:{title:{type:String,default:""},desc:{type:String,default:""},btn:{type:String,default:""},isLoading:{type:Boolean,default:!1},canClick:{type:Boolean,default:!1},tag:{type:Array,default:function(){return[]}}},methods:{onTapBtn:function(){this.$emit("tap:btn")}}},n=(e(681),e(4)),s=Object(n.a)(a,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"activity-btn-box weui-flex"},[e("div",{staticClass:"header-box",attrs:{role:"option"}},[e("div",{staticClass:"title-box"},[e("h4",{class:{"title-without-tag":!(t.tag&&t.tag.length),"title-without-desc":!t.desc},domProps:{innerHTML:t._s(t.xss(t.title))}}),e("div",{staticClass:"tag-container"},[e("span",{staticClass:"ui-aria-hidden"},[t._v(",")]),t._l(t.tag,(function(i){return e("ui-tag",{key:JSON.stringify(i),attrs:{title:i.title,desc:t.tag.desc,type:i.type}})})),e("span",{staticClass:"ui-aria-hidden"},[t._v(".")])],2)]),t.desc?e("p",{staticClass:"desc ellipsis_1",domProps:{innerHTML:t._s(t.xss(t.desc))}}):t._e()]),t.btn?e("div",{staticClass:"button-box"},[t.canClick?t.btn?[e("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"weui-btn weui-btn_mini weui-btn_primary",class:{"weui-btn_loading":t.isLoading},attrs:{role:"button"},on:{click:function(i){return i.stopPropagation(),t.onTapBtn.apply(null,arguments)}}},[e("span",{staticClass:"circle-loading"}),e("span",{staticClass:"weui-btn-text"},[t._v(t._s(t.btn))])])]:t._e():[e("span",{attrs:{role:"button","aria-disabled":"true"}},[t._v(t._s(t.btn))])]],2):t._e()])}),[],!1,null,"d0a55bf0",null);i.a=s.exports},769:function(t,i,e){"use strict";e(682)},822:function(t,i,e){"use strict";var a=e(0),n=e(17),s=e(10),o=e(8),c=new s.a({noLive:1,noLiveButton:2,live:3,liveButton:4,popConfirm:5,popCancel:6}),r={mixins:[a.k,a.m],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0},active:{type:Boolean,default:!1}},data:function(){var t=this.$props.item.activity?this.$props.item.activity:this.$props.item;return{isLoading:!1,button:t.button,notification:t.info&&t.info.notification}},computed:{activity:function(){return this.$props.item.activity?this.$props.item.activity:this.$props.item},popData:function(){return this.button&&this.button.popData},jumpInfo:function(){return this.activity.jumpInfo||this.activity},bannerUrl:function(){return this.activity.image||this.activity.imageUrl||this.activity.thumbUrl},hasCardJumpInfo:function(){return this.jumpInfo.jumpType||this.jumpInfo.jumpUrl||this.jumpInfo.userName}},watch:{item:function(){this.notification=this.activity.info&&this.activity.info.notification,this.button=this.activity.button}},created:function(){var t=this;o.b.onInputChange((function(){t.$refs.halfScreen&&t.$refs.halfScreen.hide()})),o.b.onInputConfirm((function(){t.$refs.halfScreen&&t.$refs.halfScreen.hide()})),a.a.$on(a.j.BACK_BUTTON_CLICK,(function(){t.$refs.halfScreen&&t.$refs.halfScreen.hide()}))},methods:{_reportLive:function(t){a.f.result.live({type:this.data.real_type||this.data.type,resultType:this.data.resultType,docID:this.item.docID,clickType:t})},_popConfirm:function(){var t=this;this.$refs.halfScreen&&this.$refs.halfScreen.hide(),this.isLoading=!0,a.h.getCommonCgiData({cgiName:n.a.wxaLiveSubscribe,data:{bizuin:this.activity.bizuin,roomID:this.activity.roomID}}).then((function(i){t.isLoading=!1,i.notification&&(t.notification=i.notification)})),this._reportLive(c.popConfirm),this.$emit("tap:pop-confirm")},_popCancel:function(){this.$refs.halfScreen&&this.$refs.halfScreen.hide(),this._reportLive(c.popCancel),this.$emit("tap:pop-cancel")},tap:function(){this.hasCardJumpInfo&&(this.M_confirm_go(this.activity.dialog,this.jumpInfo),this._reportLive(this.item.broadcasting?c.live:c.noLive),this.$emit("tap"))},tapButton:function(){var t=this;if(this.popData)this.$refs.halfScreen&&this.$refs.halfScreen.show();else if(this.button.cgiName)this.isLoading=!0,setTimeout((function(){t.isLoading=!1}),3e3),a.h.getCommonCgiData({cgiName:this.button.cgiName,data:this.button.param}).then((function(i){t.isLoading=!1,i.button&&t.$set(t,"button",i.button)}));else{var i=this.button.jumpInfo?this.button:this.jumpInfo;this.M_confirm_go(this.activity.dialog,i)}this._reportLive(this.item.broadcasting?c.liveButton:c.noLiveButton),this.$emit("tap:button",this.button)}}},l=(e(769),e(4)),u=Object(l.a)(r,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"activity-live-box"},[e("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"live-wrap",class:{"live-wrap-active":t.active&&t.hasCardJumpInfo},on:{click:function(i){return i.stopPropagation(),t.tap.apply(null,arguments)}}},[e("div",{staticClass:"live-image-wrapper"},[e("online-image",{staticClass:"live-image",attrs:{url:t.item.image}})],1),e("div",{staticClass:"text-wrapper"},[e("div",{attrs:{role:"button"}},[e("div",{staticClass:"live-title"},[t._v(t._s(t.item.title)),e("span",{staticClass:"ui-aria-hidden"},[t._v(".")])]),e("div",{staticClass:"line__item live-info"},[e("span",{staticClass:"live-info-title live-new-style"},[t._v(t._s(t.item.info.title))]),e("span",{staticClass:"ui-aria-hidden"},[t._v(",")]),e("span",{staticClass:"live-info-status"},[t._v(t._s(t.item.info.status))])])]),e("div",{staticClass:"live-bottom-area"},[t.notification?e("div",{staticClass:"line__item live-info-tag",attrs:{role:"alert"}},[e("span",{staticClass:"tag"},[t._v("\n            "+t._s(t.notification)+"\n          ")])]):e("ui-button",{staticClass:"live-button",attrs:{type:0===t.button.buttonType||t.button.buttonType?t.button.buttonType:5,mini:"",loading:t.isLoading},on:{tap:function(i){return i.stopPropagation(),t.tapButton.apply(null,arguments)}}},[t._v("\n          "+t._s(t.button.title)+"\n        ")])],1)]),t.popData?e("ui-half-screen",{ref:"halfScreen",attrs:{"class-name":"popup-checkbox-list",header:{type:1,title:t.popData.title,iconUrl:t.popData.iconUrl},footer:{confirm:t.popData.confirm,cancel:t.popData.reject}},on:{"tap:confirm":t._popConfirm,"tap:cancel":t._popCancel}},[e("p",{staticClass:"live-pop-title"},[t._v(t._s(t.popData.desc))])]):t._e()],1)])}),[],!1,null,"5971f6bc",null);i.a=u.exports}}]);