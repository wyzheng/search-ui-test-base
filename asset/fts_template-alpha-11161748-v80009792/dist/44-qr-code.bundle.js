(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{1229:function(t,e,i){},1230:function(t,e,i){},1866:function(t,e,i){"use strict";i(1229)},1867:function(t,e,i){"use strict";i(1230)},2213:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i(8),r="",a={mixins:[n.m],inject:["clickZone"],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{qrCode:null,asyncAPI:null,errMsg:null}},computed:{qr:{get:function(){return this.qrCode||this.item.qrCode},set:function(t){this.qrCode=Object.assign({},t)}},api:{get:function(){return this.asyncAPI||this.item.asyncAPI},set:function(t){this.asyncAPI=Object.assign({},t)}},bgLight:function(){var t=this.qr&&this.qr.color;if(!t)return 1;var e=n.g.hexToRGB(t),i=e.r,s=e.g,r=e.b;return n.g.RGBToHSL(i,s,r).l}},created:function(){var t=this;s.b.onCommonCgiReady((function(e){r==e.requestId&&(t.api=e.asyncAPI,!e||e.errMsg?t.qr?t.requestQRCode():t.errMsg=Object.assign({title:"未能加载",button:"轻触前往小程序"},t.item.errMsg,e.errMsg):(e.qrCode&&(t.qr=e.qrCode),t.requestQRCode()))})),t.requestQRCode()},methods:{tap:function(){var t=this,e=t.item.qrCode||t.item;t.M_go(Object.assign(e)),t.M_handleInsert(),t.M_clickReport({clickZone:t.clickZone.withQR,expand:e.subScene,title:e.name})},tapErr:function(){var t=this;t.M_go(t.errMsg||t.item),t.M_handleInsert(),t.M_clickReport({clickZone:t.clickZone.err,expand:t.errMsg.subScene,title:t.errMsg.button})},requestQRCode:function(){var t=this;t.qr||t.requestQRCodeImmediate(),setTimeout((function(){t.requestQRCodeImmediate()}),1e3*(t.api&&t.api.interval||10))},requestQRCodeImmediate:function(){this.api&&this.api.name&&(r=n.h.commonCgi({cgiName:this.api.name,data:this.api.params}))}}},c=(i(1866),i(4)),o=Object(c.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"qr__wrap",on:{touchstart:function(t){t.stopPropagation()},click:function(t){t.stopPropagation()}}},[t.qr?i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"qr__code active__mask",style:{"background-color":t.qr&&t.qr.color},on:{click:function(e){return e.stopPropagation(),t.tap.apply(null,arguments)}}},[i("div",{staticClass:"qr__code-info",class:{"qr__code-info-light":t.bgLight<.7}},[i("div",{staticClass:"qr__code-name"},[t._v("\n        "+t._s(t.qr.name)+"\n      ")]),i("div",{staticClass:"qr__code-type"},[t._v("\n        "+t._s(t.qr.type)+"\n      ")])]),i("online-image",{staticClass:"qr__code-image",attrs:{url:t.qr.image}})],1):t.errMsg?i("div",{staticClass:"qr__code-err"},[i("div",{staticClass:"qr__code-err-outer"},[i("div",{staticClass:"qr__code-err-inner"},[i("div",{staticClass:"qr__code-title"},[t._v("\n          "+t._s(t.errMsg.title)+"\n        ")]),i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"qr__code-button active__item",on:{click:t.tapErr}},[t._v("\n          "+t._s(t.errMsg.button)+"\n        ")])])])]):i("div",{staticClass:"qr__code_loading"},[i("div",{staticClass:"qr__code-loading-icon"})])])}),[],!1,null,null,null).exports,l=new(i(10).a)({normal:1,withQR:2,err:3}),u={components:{qr:o},mixins:[n.m],provide:function(){return{clickZone:l}},props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},computed:{showQR:function(){var t=this.item;return t.qrCode||t.asyncAPI}},methods:{tap:function(){var t=this;t.M_startDetail(),t.M_clickReport({clickZone:t.showQR?l.withQR:l.normal,expand:t.item.subScene,clickContent:t.item.title})}}},d=(i(1867),Object(c.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"qr active__item",attrs:{"data-id":t.M_exposeId()},on:{click:t.tap}},[i("div",{staticClass:"qr__info line"},[i("div",{staticClass:"line__item"},[i("online-image",{staticClass:"qr__info-icon",attrs:{url:t.item.iconUrl}})],1),i("div",{staticClass:"line__item primary"},[i("p",{staticClass:"qr__info-title",domProps:{innerHTML:t._s(t.xss(t.item.title))}}),t.item.desc?i("p",{staticClass:"qr__info-desc",domProps:{innerHTML:t._s(t.xss(t.item.desc))}}):t._e()]),t.item.button?i("div",{staticClass:"line__item"},[i("div",{staticClass:"qr__info-button"},[t._v("\n        "+t._s(t.item.button)+"\n      ")])]):t._e()]),t.showQR?i("qr",t._b({},"qr",t.$props,!1)):t._e()],1)}),[],!1,null,null,null));e.default=d.exports}}]);