(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{1334:function(t,e,i){},1410:function(t,e,i){},1417:function(t,e,i){},1418:function(t,e,i){},1973:function(t,e,i){"use strict";i(1334)},2043:function(t,e,i){"use strict";i(1417)},2044:function(t,e,i){"use strict";i(1418)},2152:function(t,e,i){"use strict";i.r(e);var n=i(1),o=i.n(n),r=i(0),s=i(46),a=i.n(s);function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var c={name:"Lottery",mixins:[r.m,r.k],props:{source:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},methods:{onItem:function(t,e){this.M_serviceSearchGo(t),this.M_clickReport({clickZone:"".concat(this.M_getClickZonePath(),".item").concat(e),clickContent:"",expand:this.M_getJumpSubScene(t)},t)},onMoreInfo:function(t,e){var i=this,n=t.moreInfo.jumpInfos.map((function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){o()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({label:t.title,value:e},t)}));a.a.picker(n,{id:"lotteryPicker",title:t.moreInfo.popTitle||"",container:"body",onConfirm:function(t){var n=t[0];i.M_serviceSearchGo(n),i.M_clickReport({clickZone:"".concat(i.M_getClickZonePath(),".item").concat(e,".picker").concat(n.value),clickContent:n.title,expand:i.M_getJumpSubScene(n)})}}),this.M_clickReport({clickZone:"".concat(this.M_getClickZonePath(),".item").concat(e,".moreInfo"),clickContent:t.moreInfo.title,expand:this.M_getJumpSubScene(t)},t.moreInfo)}}},u=(i(1973),i(4)),p=Object(u.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.source.list,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:n,staticClass:"item active__mask",attrs:{"data-report-id":t.M_itemReportId(e.reportId)},on:{click:function(i){return i.stopPropagation(),t.onItem(e,n)}}},[i("div",{attrs:{role:"button",tabindex:"-1"}},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"desc"},[t._v(t._s(e.desc))])]),i("div",{staticClass:"num-list",attrs:{role:"button",tabindex:"-1","aria-label":"中奖号码,"+e.numList.map((function(t){return t.num})).join(" . ")}},t._l(e.numList,(function(e,n){return i("span",{key:n,class:e.color,attrs:{"aria-label":"号码"+e.num}},[t._v(t._s(e.num))])})),0),e.messageList?i("div",{staticClass:"message-list"},t._l(e.messageList,(function(e,n){return i("div",{key:n,attrs:{role:"button",tabindex:"-1"}},[n<4?i("div",{staticClass:"flex message-item"},[i("div",{staticClass:"item-title"},[t._v(t._s(e.title))]),i("div",{staticClass:"flex__item item-desc"},[t._v(t._s(e.desc))])]):t._e()])})),0):t._e(),e.moreInfo?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"more-info active__link",attrs:{role:"button","data-report-id":t.M_itemReportId(e.moreInfo.reportId)},on:{click:function(i){return i.stopPropagation(),t.onMoreInfo(e,n)}}},[t._v(t._s(e.moreInfo.title))]):t._e()])})),0)}),[],!1,null,"7a945904",null);e.default=p.exports},2199:function(t,e,i){"use strict";i.r(e);var n=i(1),o=i.n(n),r=i(39),s=i(459),a=i(0),l=i(3),c=i(28),u=i(15),p={LOSE_LOTTERY:0,PRIZE:1,RED_POCKET:2},d={name:"UiLottery",props:{prizeList:Array,button:Object,title:String,links:Array,cardBgLogo:String,lotteryResult:Object,useAnimation:{type:Boolean,default:!0}},data:function(){return{prizeType:p,isAnimating:this.useAnimation,headerTitle:""}},watch:{lotteryResult:function(){this.resetHalfScreen(),this.headerTitle=this.isAnimating?"抽奖中":this.lotteryResult&&this.lotteryResult.popTitle},isAnimating:function(){var t=this;this.headerTitle="",setTimeout((function(){t.headerTitle=t.isAnimating?"抽奖中":t.lotteryResult&&t.lotteryResult.popTitle}),20)}},created:function(){this.headerTitle=this.isAnimating?"抽奖中":this.lotteryResult&&this.lotteryResult.popTitle},beforeDestroy:function(){this.unbindAnimationend()},methods:{resetHalfScreen:function(){this.isAnimating=this.useAnimation},onAnimationend:function(){this.isAnimating=!1},bindAnimationend:function(){this.$refs.popContent&&this.$refs.popContent.addEventListener("animationend",this.onAnimationend)},unbindAnimationend:function(){this.$refs.popContent&&this.$refs.popContent.removeEventListener("animationend",this.onAnimationend)},onHalfScreenHide:function(){this.resetHalfScreen(),this.unbindAnimationend()},showHalfScreen:function(){var t=this;this.$nextTick((function(){t.$refs.halfScreen.show(),t.useAnimation&&setTimeout(t.bindAnimationend)}))},hideHalfScreen:function(){this.$refs.halfScreen.hide()},onTapButton:function(){this.$emit("tap:button")},onTapLink:function(t){this.$emit("tap:link",t)},onTapImage:function(t){this.$emit("tap:image",t)},onTapPopCancel:function(){this.isAnimating||this.$emit("tap:cancel")},onTapPopConfirm:function(){this.isAnimating||this.$emit("tap:confirm")},onTapPopLink:function(){this.isAnimating||this.$emit("tap:pop-link")}}},m=(i(2468),i(2043),i(4)),f=Object(m.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.prizeList?i("div",{staticClass:"ui-lottery"},[i("div",{staticClass:"ui-aria-hidden"},[t._v("抽奖活动.")]),i("div",{staticClass:"ui-lottery-title"},[t._v(t._s(t.title))]),i("div",{class:t.prizeList.length<=2?"ui-lottery-image-normal-wrapper":"ui-lottery-image-dense-wrapper"},t._l(t.prizeList,(function(e,n){return i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:e.title+e.imageUrl,staticClass:"ui-lottery-box",on:{click:function(i){return i.stopPropagation(),t.onTapImage({image:e,index:n})}}},[e.prizeType===t.prizeType.RED_POCKET?i("div",{staticClass:"ui-lottery-box-image ui-lottery-box-red-pocket",style:{backgroundImage:"url('"+e.imageUrl+"')"}},[i("div",{staticClass:"ui-lottery-red-pocket-open-button"})]):i("div",{staticClass:"ui-lottery-box-image",style:{backgroundImage:"url('"+e.imageUrl+"')"}}),i("div",{staticClass:"ui-lottery-box-title",attrs:{role:"option"}},[i("span",{staticClass:"ui-aria-hidden"},[t._v("奖品名称:")]),t._v(t._s(e.title)+"\n      ")])])})),0),t.button?i("ui-button",{staticClass:"ui-lottery-button",attrs:{type:t.button.buttonType,role:"button",tabindex:"-1"},nativeOn:{click:function(e){return e.stopPropagation(),t.onTapButton.apply(null,arguments)}}},[t._v("\n    "+t._s(t.button.title)+"\n  ")]):t._e(),i("div",{staticClass:"ui-lottery-links-wrapper"},t._l(t.links,(function(e,n){return i("span",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],key:e.title,staticClass:"ui-lottery-link",attrs:{role:"link"},on:{click:function(i){return i.stopPropagation(),t.onTapLink({link:e,index:n})}}},[t._v(t._s(e.title))])})),0),t.lotteryResult?i("ui-half-screen",{ref:"halfScreen",attrs:{"class-name":{"ui-half-screen-with-lottery-animation":t.useAnimation},header:{title:t.headerTitle,close:!0}},on:{hide:t.onHalfScreenHide}},[i("div",{ref:"popContent",staticClass:"ui-lottery-pop-animation-box",class:{"ui-with-animation":t.useAnimation}},[i("div",{staticClass:"ui-lottery-pop-card-box"},[i("div",{staticClass:"ui-lottery-pop-card ui-lottery-pop-card-1"},[i("div",{staticClass:"ui-lottery-pop-card",style:{backgroundImage:t.cardBgLogo&&"url('"+t.cardBgLogo+"')"}}),i("div",{staticClass:"ui-lottery-pop-card-1-thumb-box"},[t.lotteryResult.prizeType===t.prizeType.LOSE_LOTTERY?i("div",{staticClass:"ui-lottery-pop-card-1-thumb-empty"}):i("div",{staticClass:"ui-lottery-pop-card-1-thumb",style:{backgroundImage:t.cardBgLogo&&"url('"+t.lotteryResult.imageUrl+"')"}},[t.lotteryResult.prizeType===t.prizeType.RED_POCKET?i("div",{staticClass:"ui-lottery-red-pocket-open-button"}):t._e()])])]),t._l(8,(function(e){return i("div",{key:e+1,staticClass:"ui-lottery-pop-card",class:"ui-lottery-pop-card-"+(e+1),style:{backgroundImage:"url('"+t.cardBgLogo+"')"}})}))],2)]),i("div",{staticClass:"ui-lottery-pop-content",class:{"ui-with-animation":t.useAnimation}},[i("div",{staticClass:"ui-lottery-pop-thumb-bg",class:{"ui-lottery-pop-thumb-bg-has-prize":t.lotteryResult.prizeType!==t.prizeType.LOSE_LOTTERY}}),t.lotteryResult.title?i("div",{staticClass:"ui-lottery-pop-title",attrs:{"aria-live":"polite"}},[t._v(t._s(t.lotteryResult.title))]):t._e(),t.lotteryResult.link?i("div",{directives:[{name:"active",rawName:"v-active.stop",value:t.lotteryResult.link.jumpInfo||t.lotteryResult.link.jumpType,expression:"lotteryResult.link.jumpInfo || lotteryResult.link.jumpType",modifiers:{stop:!0}}],staticClass:"ui-lottery-pop-link",attrs:{role:t.lotteryResult.link.jumpInfo||t.lotteryResult.link.jumpType?"link":"option"},on:{click:function(e){return e.stopPropagation(),t.onTapPopLink.apply(null,arguments)}}},[t._v("\n        "+t._s(t.lotteryResult.link.title)+"\n        "),t.lotteryResult.link&&(t.lotteryResult.link.jumpInfo||t.lotteryResult.link.jumpType)?i("ui-arrow",{attrs:{gap:""}}):t._e()],1):t._e(),i("div",{staticClass:"ui-lottery-pop-btn-wrp"},[t.lotteryResult.cancel?i("ui-button",{staticClass:"ui-lottery-pop-btn",attrs:{type:3},nativeOn:{click:function(e){return e.stopPropagation(),t.onTapPopCancel.apply(null,arguments)}}},[t._v("\n          "+t._s(t.lotteryResult.cancel.title)+"\n        ")]):t._e(),t.lotteryResult.confirm?i("ui-button",{staticClass:"ui-lottery-pop-btn",attrs:{type:7},nativeOn:{click:function(e){return e.stopPropagation(),t.onTapPopConfirm.apply(null,arguments)}}},[t._v("\n          "+t._s(t.lotteryResult.confirm.title)+"\n        ")]):t._e()],1)])]):t._e(),i("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{src:t.cardBgLogo,alt:""}})],1):t._e()}),[],!1,null,"0f7af575",null).exports;function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){o()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}f.install=function(t){t.component(f.name,f)};var g={name:"Lottery",components:{UiLottery:f},mixins:[r.a,s.a],props:{data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0}},data:function(){return{renderButton:null,renderLinks:null,lotteryResult:null,loading:!1,requestId:"",win:!1}},watch:{item:{handler:function(){this.renderButton=this.item.button,this.renderLinks=this.item.links,this.lotteryResult=null,this.win=!1,this.requestId=""},immediate:!0},loading:function(){this.loading?l.a.$emit(a.j.showToast,{action:c.a.loading}):l.a.$emit(a.j.hideToast)}},methods:{onTap:function(){this.renderLinks&&this.renderLinks.length&&(this.M_clickReport({clickZone:5,clickContent:"整体"}),this.M_go(this.renderLinks[this.renderLinks.length-1]),this.$emit("tap"))},onTapButton:function(){var t=this;this.loading||(this.M_clickReport({clickZone:3,clickContent:this.renderButton.title}),this.renderButton.jumpInfo||this.renderButton.jumpType?this.M_go(this.renderButton):(this.loading=!0,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.loading&&(t.loading=!1,t.$store.commit("updateDialog",{title:"未能参与抽奖",desc:"当前参与人数较多，请稍后再试",confirm:"我知道了",cancel:!1}))}),5e3),a.h.getCommonCgiData({cgiName:this.renderButton.cgiName,data:this.renderButton.param}).then((function(e){var i=y(y({dialog:{}},e),e.result);if(t.loading=!1,t.requestId=i.requestId,t.win=i.win,i.errCode)return t.loading=!1,void t.$store.commit("updateDialog",{title:i.dialog&&i.dialog.title||"未能参与抽奖",desc:i.dialog&&i.dialog.desc||"当前参与人数较多，请稍后再试",confirm:"我知道了",cancel:!1});u.c.result.zoneLotteryResultExpose({docID:t.item.docID,requestId:t.requestId,status:i.ossStatus}),t.renderButton=i.button,t.renderLinks=i.links,t.lotteryResult=i.lotteryResult,t.lotteryResult&&t.$refs.lottery.showHalfScreen()}))),this.$emit("tap"))},onTapLink:function(t){var e=t.link;this.M_go(e),this.M_clickReport({clickZone:1,clickContent:e.title}),this.$emit("tap")},onTapImage:function(t){var e=t.image;this.M_go(e),this.M_clickReport({clickZone:4}),this.$emit("tap")},onTapCancel:function(){this.$refs.lottery.hideHalfScreen(),u.c.result.zoneLotteryResultClick({docID:this.item.docID,requestId:this.requestId,clickType:0===this.win?1:3}),this.$emit("tap")},onTapConfirm:function(){this.$refs.lottery.hideHalfScreen(),this.M_go(this.lotteryResult.confirm),u.c.result.zoneLotteryResultClick({docID:this.item.docID,requestId:this.requestId,clickType:0===this.win?1:4}),this.$emit("tap")},onTapPopLink:function(){var t=this.lotteryResult.link;(t.jumpInfo||t.jumpType)&&(this.M_go(this.lotteryResult.link),u.c.result.zoneLotteryResultClick({docID:this.item.docID,requestId:this.requestId,clickType:2}),this.$emit("tap"))}}},v=(i(2044),Object(m.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{key:t.item.docID,staticClass:"lottery oz__margin-dense oz__item",attrs:{"data-id":t.M_exposeId()}},[i("div",{staticClass:"oz__body"},[i("ui-lottery",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],ref:"lottery",attrs:{"prize-list":t.item.prizeList,title:t.item.title,"card-bg-logo":t.item.cardBgLogo,button:t.renderButton,links:t.renderLinks,"lottery-result":t.lotteryResult},on:{"tap:button":t.onTapButton,"tap:link":t.onTapLink,"tap:image":t.onTapImage,"tap:cancel":t.onTapCancel,"tap:confirm":t.onTapConfirm,"tap:pop-link":t.onTapPopLink},nativeOn:{click:function(e){return t.onTap.apply(null,arguments)}}})],1)])}),[],!1,null,"999f6b4e",null));e.default=v.exports},2468:function(t,e,i){"use strict";i(1410)},459:function(t,e,i){"use strict";var n={methods:{ozJump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;e.M_confirm_go(t.dialog,t)}},computed:{M_canHeaderJump:function(){return!!this.item.header&&!!(this.item.header.jumpUrl||this.item.header.weappUrl||this.item.header.jumpInfo)}}};e.a=n}}]);